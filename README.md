# Angular CDK drag-and-drop problem repro

This repository reproduces a problem with [the Angular CDK drag-and-drop module](https://material.angular.io/cdk/drag-drop/overview).

I expected all three cards to have working drag-and-drop lists that allow the user to reorder the same underlying words list.

In fact, the middle one does not work, because it is generated by a `*ngFor` over the result of a method on the component. Trying to drag and drop words in this card simply does not do anything; there is no compile error, or any error or warning on the JavaScript console.

This was raised as the following issue in the `angular/components` project: https://github.com/angular/components/issues/21682

There, it emerged that this is not in fact a drag-and-drop bug but a consequence of how Angular change detection works. As items are dragged in the middle card, change detection constantly fires, which causes the method to keep being re-evaluated. This destroys the item being dragged.

One solution I found (bottom card) was to use an Angular pipe. This works, provided the input array is not modified in place (pure pipes only trigger when their input values change from the point of view of referential equality).

This project was generated with [Angular CLI](https://github.com/angular/angular-cli) version 11.1.1.

## Development server

Run `ng serve` for a dev server. Navigate to `http://localhost:4200/`. The app will automatically reload if you change any of the source files.

## Code scaffolding

Run `ng generate component component-name` to generate a new component. You can also use `ng generate directive|pipe|service|class|guard|interface|enum|module`.

## Build

Run `ng build` to build the project. The build artifacts will be stored in the `dist/` directory. Use the `--prod` flag for a production build.

## Running unit tests

Run `ng test` to execute the unit tests via [Karma](https://karma-runner.github.io).

## Running end-to-end tests

Run `ng e2e` to execute the end-to-end tests via [Protractor](http://www.protractortest.org/).

## Further help

To get more help on the Angular CLI use `ng help` or go check out the [Angular CLI Overview and Command Reference](https://angular.io/cli) page.
